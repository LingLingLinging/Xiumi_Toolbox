# 毁了
- 在copilot claude 的带领下越来越混，完全无法处理信息，脑子一团浆糊
- 有空再说吧































# 秀米编辑器另存码获取工具

## 功能说明

这个工具可以自动化获取秀米编辑器中文章的另存码，支持半自动化操作：
1. 自动打开浏览器并导航到秀米登录页面
2. 等待用户手动完成登录
3. 自动获取文章列表并提取另存码
4. 将结果保存为JSON文件

## 安装依赖

在运行脚本前，请先安装必要的依赖包：

```bash
pip install -r requirements.txt
```

或者手动安装：

```bash
pip install selenium webdriver-manager beautifulsoup4 requests lxml
```

## 使用方法

### 方式一：标准模式（推荐新手）

1. **运行脚本**
   ```bash
   python fetch_quickshare.py
   ```

2. **选择浏览器**
   - Chrome：经典选择，兼容性好
   - Edge：推荐选择，Windows系统默认，通常更稳定

3. **选择连接方式**
   - 启动新的浏览器实例（默认）
   - 连接到已运行的浏览器
   - 自动启动调试模式浏览器
   - 指定浏览器路径

4. **选择运行模式**
   - 有界面模式：可以看到浏览器窗口，推荐用于调试
   - 无头模式：后台运行，运行速度更快

### 方式二：预启动模式（推荐熟练用户）

1. **预启动浏览器调试模式**
   ```bash
   python start_browser.py
   ```

2. **在浏览器中完成预操作**
   - 打开秀米网站
   - 完成登录
   - 导航到需要的页面

3. **运行主脚本**
   ```bash
   python fetch_quickshare.py
   ```
   选择"连接到已运行的浏览器"

### 方式三：手动启动模式

1. **手动启动浏览器**（以Edge为例）
   ```bash
   "C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe" --remote-debugging-port=9222
   ```

2. **运行脚本并选择连接模式**
   ```bash
   python fetch_quickshare.py
   ```

### 完成获取

无论使用哪种方式，脚本都会：
- 自动获取文章列表
- 逐个点击文章并获取另存码
- 进度会实时显示在控制台
- 另存码会保存到JSON文件中

## 配置说明

### 主要参数

- `browser`: 浏览器类型 ("chrome" 或 "edge")
- `headless`: 是否使用无头模式
- `timeout`: 登录等待超时时间（默认300秒）
- 文章数量限制：默认处理前10篇文章

### 可调整的选择器

脚本中使用了多种CSS/XPath选择器来适配秀米的页面结构，如果页面更新导致脚本失效，可以调整以下选择器：

1. **登录成功检测选择器** (第133-137行)
2. **文章列表选择器** (第167-172行)  
3. **文章标题选择器** (第182-187行)
4. **另存码按钮选择器** (第221-228行)
5. **另存码内容选择器** (第238-244行)

## 输出格式

生成的JSON文件包含以下信息：

```json
{
  "timestamp": "2025-07-20T10:30:00",
  "total_count": 5,
  "codes": {
    "文章标题1": "另存码1",
    "文章标题2": "另存码2"
  }
}
```

## 注意事项

1. **使用须知**
   - 请遵守秀米的使用条款
   - 建议控制使用频率，避免给服务器造成压力
   - 仅用于个人内容备份，请勿用于商业用途

2. **技术限制**
   - 需要手动完成登录操作
   - 依赖于秀米的页面结构，可能需要根据页面更新调整选择器
   - 需要安装Chrome或Edge浏览器

3. **故障排除**
   - 如果无法找到浏览器驱动，脚本会自动下载
   - 推荐使用Edge浏览器，Windows系统兼容性更好
   - 如果选择器失效，需要根据实际页面结构调整代码
   - 网络问题可能导致超时，可以增加等待时间

## 开发说明

### 类结构

- `XiumiQuickShareFetcher`: 主要的获取器类
  - `setup_driver()`: 初始化浏览器驱动
  - `open_xiumi_login()`: 打开登录页面
  - `wait_for_login()`: 等待用户登录
  - `get_articles_list()`: 获取文章列表
  - `get_quickshare_code()`: 获取单篇文章的另存码
  - `save_codes_to_file()`: 保存结果到文件
  - `run()`: 主运行流程

### 扩展功能

可以考虑添加的功能：
- 支持指定特定文章ID或标题
- 添加重试机制
- 支持批量处理多个账号
- 添加图形界面
- 支持更多导出格式（CSV、Excel等）

## 许可证

Apache License 2.0
